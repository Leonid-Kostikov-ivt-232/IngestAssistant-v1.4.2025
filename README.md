# Помощник по копированию и обработке MTS-файлов

## Назначение приложения

Данное приложение — десктопный помощник для копирования и обработки MTS-файлов с USB-флешек. Изначально разрабатывалось для работы журналистов и технических сотрудников, участвующих в приёме, хранении и обработке видеосюжетов.  
Программа стабильно работает на домашних компьютерах с операционной системой Windows.

## Главные функции

- Поиск и выбор флешки с видеофайлами формата MTS.  
- Копирование выбранных файлов на указанный диск в организованные по дате/журналисту папки.  
  Имя папки для копирования формируется как «ДеньМесяц ФИОЖурналиста Название сюжета».  
  (Колонку «Время файла» лучше переименовать в «Дата инжеста»).  
- Добавление ФИО журналиста в список.  
- Запуск перекодирования файлов с помощью FFmpeg в формат MXF.  
- Возможность экстренной остановки процесса.

## Описание элементов интерфейса

| Элемент            | Описание                                                      |
|--------------------|---------------------------------------------------------------|
| Выпадающий список  | Список журналистов; поддерживает добавление новых ФИО.         |
| Поле ввода          | Ввод названия сюжета вручную.                                  |
| Таблица файлов      | Отображает найденные на флешке видеофайлы.   |
| Кнопка «Найти файлы» | Автоматический поиск MTS-файлов на подключённых накопителях.  |
| Кнопка «Начать инжест» | Запускает процесс копирования и кодирования.                   |
| Таймер              | Показывает время выполнения текущей операции (часы:минуты:секунды). |
| Кнопка «Стоп»       | Прерывает текущее копирование или кодирование.                  |
| Метка статуса       | Отображает текущий этап работы или сообщения об ошибках.        |

## Пошаговая инструкция

### 1. Подготовка

- Подключите USB-флешку с `.mts`-файлами.  
- Убедитесь, что структура папок соответствует:  
  `КОРЕНЬ_ФЛЭШКИ/PRIVATE/AVCHD/BDMV/STREAM` с `.mts`-файлами.  
- Проверьте, что в файле `config.ini` указаны пути для инжеста:  

> ```
>[settings]
>ingest_root_path = C:\SERVER01 ; Директория для инжеста
>mxf_target_folder = C:\ResultMXF ; Директория для файла .mxf
> ```

### 2. Запуск приложения

- Откройте программу.  
- В выпадающем списке выберите ФИО журналиста или добавьте новое имя.  
- Впишите название сюжета.

### 3. Поиск и выбор файлов

- Нажмите кнопку «Найти файлы MTS на флешке».  
- Если обнаружено несколько устройств, выберите нужную флешку.  
- В таблице отобразятся найденные `.mts`-файлы с датой.  
- Отметьте нужные файлы для копирования.

> **Примечание:**  
> Список журналистов хранится в файле `journalists.ini` со структурой:  
> ```
> [journalists]
> names = Иванов, Петров, Сидоров, Журова, Смирнова
> ```  
> Если файлы не найдены, проверьте подключение флешки и её структуру.

### 4. Копирование и кодирование

- Убедитесь, что все поля заполнены корректно.  
- Нажмите кнопку «Начать инжест».  
- Таймер начнёт отсчёт времени выполнения операции.  
- Процесс копирования и последующего кодирования выполняется последовательно.  
- Папка для копирования `.mts`-файлов указана параметром `ingest_root_path` в `config.ini`.  
- Кнопка «Стоп» позволяет экстренно прервать текущие действия.  
- Статус текущей операции отображается в метке статуса.

### 5. Завершение работы

- По окончании кодирования появится уведомление.  
- Готовый MXF-файл будет перемещён в папку, указанную параметром `mxf_target_folder` в `config.ini`.  
- В случае ошибок информация отобразится в метке статуса.

### 6. Остановка процесса

- Для прерывания копирования или кодирования нажмите кнопку «Стоп».  
- Таймер остановится, процессы завершатся.  
- В статусе отобразится сообщение:  
- «Операция остановлена пользователем» — если остановка была инициирована во время копирования.  
- Или соответствующее сообщение об ошибке.  
- В случае неожиданного закрытия приложения процессы также будут прерваны автоматически.

## Кратко о назначении кнопок и элементов

- **Добавить журналиста:** сохраняет ФИО для быстрого выбора в будущем.  
- **Найти файлы:** поиск и отображение всех MTS-файлов на подключённых флешках.  
- **Начать инжест:** запуск копирования и кодирования с отображением времени выполнения.  
- **Стоп:** аварийное прерывание текущей операции.  
- **Метка статуса и таймер:** отображают текущий статус и время выполнения.

## Системные требования

- Операционные системы: Windows 7(x64), 8.1(x64), 10(x64), 11  

## Используемые компоненты

- FFmpeg версии `2025-07-10-git-82aeee3c19-essentials_build`, скачанный с сайта:  
[https://www.gyan.dev/ffmpeg/builds/](https://www.gyan.dev/ffmpeg/builds/)

## Лицензии

- Основной код приложения распространяется под лицензией **MIT License**.  
  Полный текст лицензии доступен в файле [`LICENSE`](./LICENSE).

- Приложение использует внешний исполняемый файл **FFmpeg** (версия `2025-07-10-git-82aeee3c19-essentials_build`), распространяемый под лицензией **GNU Lesser General Public License (LGPL) версии 3.0**.  
  Условия использования FFmpeg описаны в файле [`LICENSE LGPL-3.0`](./LICENSE%20LGPL-3.0).

- Исходный код FFmpeg доступен по адресу:  
  [https://github.com/FFmpeg/FFmpeg/commit/82aeee3c19](https://github.com/FFmpeg/FFmpeg/commit/82aeee3c19)

Пожалуйста, ознакомьтесь с указанными лицензиями для понимания прав и обязанностей при использовании этого программного обеспечения.
